{% extends 'base.html' %}


{% block title %}Студенты{% endblock title %}


{% block active_students %}active{% endblock %}


{% block content %}
    {% if messages %}
        <div class="messages">
            {% for msg in messages %}
                <div class="alert alert-{{ msg.tags }} alert-dismissible" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    {{msg.message}}
                </div>
            {% endfor %}
        </div>
    {% endif %}
    {% if user.is_superuser %}
        <p><a class="add_student_button" href="{% url 'students:add' %}">Добавить нового студента</a></p>
    {% endif %}
    <h3>Список студентов</h3>
    <table >
        <tr>
            <th>#</th>
            <th>фамилия имя</th>
            <th>адрес</th>
            <th>skype</th>
            <th>курсы</th>
            {% if user.is_superuser %}
                 <th></th>
                 <th></th>
             {% endif %}
        </tr>
        {% for i in object_list %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td><a href="{% url 'students:detail' i.id %}">{{ i.surname }} {{ i.name }}</a></td>
            <td>{{ i.address }}</td>
            <td>{{ i.skype }}</td>
            <td>{% for j in i.courses.all %}
                    <a href="{%  url 'courses:detail' j.id %}">{{ j.name }}</a><br>
                {% endfor %}
            </td>
            {% if user.is_superuser %}
                <td>
                    <a class="add_student_button" href="{% url 'students:edit' i.id %}">Изменить</a>
                </td>
                <td>
                    <a class="add_student_button" href="{% url 'students:remove' i.id %}">Удалить</a>
                </td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

    {% if is_paginated %}

        <ul class="pagination">

           {% if page_obj.has_previous %}
               <li><a href="{{ course_id }}page={{ page_obj.previous_page_number }}"><< previous</a></li>
           {% endif %}

           {% for page in paginator.page_range %}
               {% if page == page_obj.number %}
                   <li class="active"><a href="">{{ page }}<span class="sr-only"></span></a></li>
               {% else %}
                   <li><a href="{{ course_id }}page={{ page }}">{{ page }}<span class="sr-only"></span></a></li>
               {% endif %}
           {% endfor %}

           {% if page_obj.has_next %}
               <li><a href="{{ course_id }}page={{ page_obj.next_page_number }}">next >></a></li>
           {% endif %}

        </ul>
    {% endif %}
{% endblock content %}